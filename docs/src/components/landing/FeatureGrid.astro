---
import Section from "./Section.astro";

const features = [
  {
    title: "Type Safety",
    description: "Zod schemas at every step boundary. Mis-wired pipelines fail at compile time, not runtime.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m10 13-2 2 2 2"/><path d="m14 17 2-2-2-2"/></svg>`,
  },
  {
    title: "Agent Steps",
    description: "AI agents as first-class workflow steps with typed I/O. Analyze mode for JSON output, build mode for code generation.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>`,
  },
  {
    title: "Testable",
    description: "In-memory providers for instant, deterministic tests. No mocking, no network calls, no API costs.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m9 15 2 2 4-4"/></svg>`,
  },
  {
    title: "Git Store",
    description: "Every prompt, response, and tool call stored in git refs. Invisible to git log, pushable/pullable.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7"/><path d="M6 9v12"/></svg>`,
  },
  {
    title: "Checkpoints",
    description: "Human-in-the-loop approval steps. Pause execution, prompt for input, resume with typed responses.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 7 17l-5-5"/><path d="m22 10-7.5 7.5L13 16"/></svg>`,
  },
  {
    title: "Composable",
    description: "pipe(), parallel(), asStep(). Build complex workflows from simple, reusable pieces.",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>`,
  },
];
---

<Section title="Core Features" bordered>
  <div class="feature-grid">
    {features.map((feature) => (
      <div class="card card-flat">
        <div class="row">
          <div class="card-icon" set:html={feature.icon} />
          <h3 class="card-title">{feature.title}</h3>
        </div>
        <p class="card-description">{feature.description}</p>
      </div>
    ))}
  </div>
</Section>

<style>
  .feature-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
  }

  .card-icon {
    margin-bottom: var(--space-sm);
  }

  .card-title {
    margin-bottom: var(--space-xs);
  }

  @media (max-width: 600px) {
    .feature-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
